<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Collision Engine</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div id="flex-box">
      <div id="canvas-box">
        <canvas id="canvas" width="800" height="600"></canvas>
        <div id="canvas-description">
        <p>Click on a shape to select. Click anywhere else on canvas to deselect. Use WASDR to apply impulses to the shape.</p>
        </div>
      </div>

      <div id="settings-box">
        <h3>Settings</h3>
        <br>
        <p id="friction">Friction: 0.2</p>
        <input id="frictionSlider" type="range" min="0" max="1" value="0.2" step="0.1" oninput="frictionChange(this.value)">
        <br><br>
        <p id="elasticity">Elasticity: 1.0</p>
        <input id="elasticitySlider" type="range" min="0" max="1" value="1" step="0.1" oninput="elasticityChange(this.value)">
        <br><br>
        <p id="angularFriction">Angular Friction: 0.1</p>
        <input id="angularFrictionSlider" type="range" min="0" max="1" value="0.5" step="0.1" oninput="angularFrictionChange(this.value)">
        <br><br>
        <p id="gravity">Gravity: (0, 0)</p>
        <label for="gravityXSlider">X</label>
        <input id="gravityXSlider" name="gravityXSlider" type="range" min="-1" max="1" value="0" step="0.1" oninput="gravityXChange(this.value)">
        <br>
        <label for="gravityYSlider">Y</label>
        <input id="gravityYSlider" name="gravityYSlider" type="range" min="-1" max="1" value="0" step="0.1" oninput="gravityYChange(this.value)">
        <br><br>
        <label for="collisionResolution">Do Collision Resolution</label>
        <input type="checkbox" id="collisionResolution" name="collisionResolution" checked=true oninput="collisionResolutionChange(this.checked)">
        <br>
        <label for="collisionRotation">Do Collision Rotation</label>
        <input type="checkbox" id="collisionRotation" name="collisionRotation" checked=true oninput="collisionRotationChange(this.checked)">
        <br><br>
        <label for="impulseSlider">Impulse</label>
        <input id="impulseSlider" name="impulseSlider" type="range" min="3" max="13" value="0" step="1" oninput="impulseChange(this.value)">
        <br><br>
        <div class="centered">
          <button type="button" onclick="addImpulse()" style="margin-right: 15px;">Add Impulse</button>
          <button type="button" onclick="resetSimulation()">Reset Simulation</button>
        </div>
      </div>

      <div id="shapes-box">
        <div class="inner-shapes-box" id="box1">
          <h3>Selected Shape</h3>
          <br>
          <div id="selectedShapeTable" display="block">
            <table>
              <tr>
                <th>Position: </th>
                <td id="selectedShapePos">(0, 0)</td>
              </tr>
              <tr>
                <th>Velocity: </th>
                <td id="selectedShapeVel">(0, 0)</td>
              </tr>
              <tr>
                <th>Rotational Velocity: </th>
                <td id="selectedShapeRot">0.0</td>
              </tr>
              <tr>
                <th>Mass: </th>
                <td id="selectedShapeMass">0.0</td>
              </tr>
              <tr>
                <th>Immovable: </th>
                <td id="selectedShapeImmovable">false</td>
              </tr>
              <tr>
                <th>Sides: </th>
                <td id="selectedShapeSides">0</td>
              </tr>
            </table>
          </div>
        </div>
        <div class="inner-shapes-box" id="noSelectedShape">
          <p>No selected shape</p>
        </div>
        <div class="inner-shapes-box" id="box2">
          <h3>Add Shape</h3>
          <br>
          <table>
            <tr>
              <th>X:</th>
              <td><input type="number" name="xPos" id="xPos" value="400"></td>
            </tr>
            <tr>
              <th>Y:</th>
              <td><input type="number" name="yPos" id="yPos" value="300"></td>
            </tr>
            <tr>
              <th>Sides:</th>
              <td><input type="number" name="sides" id="sides" value="4"></td>
            </tr>
            <tr>
              <th>Radius:</th>
              <td><input type="number" name="radius" id="radius" value="50"></td>
            </tr>
            <tr>
              <th>Mass:</th>
              <td><input type="number" name="mass" id="mass" value="5"></td>
            </tr>
            <tr>
              <th>Immovable:</th>
              <td><input type="checkbox" name="immovable" id="immovable" checked=false></td>
            </tr>
          </table>
          <br><br>
          <div class="centered">
            <button type="button" onclick="createShape()">Add Shape</button>
          </div>
        </div>
        </div>
</div>


    <div id="block-text">
      <p>This is a 2D collision engine/modeling system made entirely with JavaScript, HTML, and CSS. No external libraries are used. Separating Axis Theorem is used to model the collisions between the shapes. Any convex polygon is supported.</p>
    </div>

    <div class="footer">
      <p>Created by Eric Anderson</p>
        <a href="https://github.com/ericanderson2/physics-engine" target="_blank">Github Repository</a>
    </div>

    <script type="text/javascript" src="polygon.js"></script>
    <script type="text/javascript" src="script.js"></script>

  </body>
</html>
